# PureScript UI

This repository provides building blocks usable to create Wildcat screens.


## Philosophy

This repository holds the design atoms we use in CitizenNet applications. These atoms can be built, styled, and rigorously tested without being forced into the context of the application. That allows for faster fixes and iteration in a sandbox environment so we can isolate errors, and more importantly, it allows easy access for business and design teams to verify our components without having to wait for a staging release or build anything locally.

This separation of concerns carries the same benefits as functional programming generally and fits well with using Tailwind (functional css) and PureScript. The Wildcat repository focuses on building a robust, usable application for our end users, whereas the CN UI repository focuses on providing self-contained, well-tested design atoms that can be dropped into any Wildcat screen and just as easily be updated or replaced.

There are four relevant parts to this project:

- `src`: contains the pre-built components and UI styles we can drop into Wildcat screens
- `test`: contains snapshot and logic tests for our components
- `css`: contains our modified version of Tailwind, built and minified with dead code elimination
- `ui-guide`: contains a small PureScript site demonstrating our components and styling so we can visually test implementations
- `docs`: contains the source code for a GitHub Pages site with all our components; generated by `ui-guide` with `npm run build-prod`


## Use

### Preview & Testing
One of the major goals of this project is to provide a minimal environment to test the UI components we build and ensure the behaviors and styling are correct without coupling them to a particular screen in the app. Once the individual units are built and tested, we know we can safely import and use them in the app.

- Components can be viewed and tested by anyone at the [documentation site](https://citizennet.github.io/purescript-cn-ui/). This is generated from the PureScript app in `ui-guide/`.
- TODO: There are no tests yet.
- TODO: There is no continuous integration yet.

### Developing
Both the PureScript and CSS folders have convenience scripts that will watch and rebuild files on save with `npm run watch`.

### Publishing
One of the primary aims of this project is to provide a way for non-PureScript developers to view and test our components. That ability is provided by the generated [documentation site](https://citizennet.github.io/purescript-cn-ui/), but we have to actually generate that site if we've made changes.

To do that, ensure that any commit to the master branch is preceded by a call to `npm run build-prod`:

```sh
npm run build-prod
git commit -m "..."
git push origin master
```

This command will build the project, generate the JavaScript for the docs, and build and copy over the CSS.

